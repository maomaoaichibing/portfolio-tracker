/**portfolio.wxml**/
<view class="page-container">
  <!-- é¡¶éƒ¨ç»Ÿè®¡ -->
  <view class="header-stats">
    <view class="stat-item">
      <text class="stat-value">{{totalMarketValue}}</text>
      <text class="stat-label">æ€»å¸‚å€¼</text>
    </view>
    <view class="stat-item">
      <text class="stat-value {{totalPnL >= 0 ? 'text-success' : 'text-danger'}}">
        {{totalPnL >= 0 ? '+' : ''}}{{totalPnL}}%
      </text>
      <text class="stat-label">æ€»ç›ˆäº</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{portfolio.length}}</text>
      <text class="stat-label">æŒä»“æ•°</text>
    </view>
  </view>

  <!-- æŒä»“åˆ—è¡¨ -->
  <view class="portfolio-list" wx:if="{{portfolio.length > 0}}">
    <view wx:for="{{portfolio}}" wx:key="id" class="stock-card" bindtap="viewStockDetail" data-stock="{{item}}">
      <view class="stock-header">
        <view class="stock-info">
          <text class="stock-name">{{item.name}}</text>
          <text class="stock-symbol">{{item.symbol}}</text>
        </view>
        <view class="stock-price">
          <text class="current-price">Â¥{{item.price}}</text>
          <text class="price-change {{item.change >= 0 ? 'text-success' : 'text-danger'}}">
            {{item.change >= 0 ? '+' : ''}}{{item.change}} ({{item.changePercent}}%)
          </text>
        </view>
      </view>
      
      <view class="stock-details">
        <view class="detail-item">
          <text class="detail-label">æŒä»“æ•°é‡</text>
          <text class="detail-value">{{item.shares}}</text>
        </view>
        
        <view class="detail-item">
          <text class="detail-label">æˆæœ¬ä»·</text>
          <text class="detail-value">Â¥{{item.avgCost || '-'}}</text>
        </view>
        
        <view class="detail-item">
          <text class="detail-label">å¸‚å€¼</text>
          <text class="detail-value">Â¥{{item.marketValue}}</text>
        </view>
        
        <view class="detail-item">
          <text class="detail-label">ç›ˆäº</text>
          <text class="detail-value {{item.pnl >= 0 ? 'text-success' : 'text-danger'}}">
            {{item.pnl >= 0 ? '+' : ''}}{{item.pnl}}%
          </text>
        </view>
      </view>
      
      <!-- å¿«æ·æ“ä½œ -->
      <view class="stock-actions">
        <button class="action-btn" size="mini" bindtap="viewAnalysis" data-symbol="{{item.symbol}}">
          åˆ†æ
        </button>
        <button class="action-btn" size="mini" type="primary" bindtap="setAlert" data-symbol="{{item.symbol}}">
          é¢„è­¦
        </button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{portfolio.length === 0 && !loading}}">
    <image class="empty-icon" src="/images/empty-portfolio.png" mode="aspectFit"></image>
    <text class="empty-text">æš‚æ— æŒä»“</text>
    <text class="empty-subtext">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸Šä¼ æŒä»“æˆªå›¾</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <button class="btn-primary upload-btn" bindtap="uploadPortfolio">
      <text class="btn-icon">ğŸ“¸</text>
      <text>ä¸Šä¼ æŒä»“</text>
    </button>
  </view>

  <!-- è®¾ç½®é¢„è­¦å¼¹çª— -->
  <view class="modal" wx:if="{{showAlertModal}}">
    <view class="modal-mask" bindtap="closeAlertModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">è®¾ç½®ä»·æ ¼é¢„è­¦</text>
        <text class="modal-close" bindtap="closeAlertModal">Ã—</text>
      </view>
      
      <view class="modal-body">
        <text class="alert-stock">{{selectedStock.name}} ({{selectedStock.symbol}})</text>
        <text class="alert-current">å½“å‰ä»·æ ¼: Â¥{{selectedStock.price}}</text>
        
        <view class="form-item">
          <text class="form-label">é¢„è­¦ç±»å‹</text>
          <picker bindchange="onAlertTypeChange" value="{{alertTypeIndex}}" range="{{alertTypes}}">
            <view class="picker">
              {{alertTypes[alertTypeIndex]}}
            </view>
          </picker>
        </view>
        
        <view class="form-item">
          <text class="form-label">ç›®æ ‡ä»·æ ¼</text>
          <input type="digit" placeholder="è¯·è¾“å…¥ç›®æ ‡ä»·æ ¼" value="{{targetPrice}}" bindinput="onPriceInput" />
        </view>
      </view>
      
      <view class="modal-footer">
        <button class="btn-secondary" bindtap="closeAlertModal">å–æ¶ˆ</button>
        <button class="btn-primary" bindtap="saveAlert">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
